/**
 * ========================================
 * –ù–ê–°–¢–†–û–ô–ö–ò –ò–ì–†–´ FLOW FLIGHT
 * ========================================
 *
 * –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å.
 * –ö–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–º–µ–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç.
 */

export const gameSettings = {

  // ==========================================
  // üéÆ –û–ë–©–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò –ú–ê–¢–ß–ê
  // ==========================================
  match: {
    /** –°–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ –≤ –æ–¥–Ω–æ–º –º–∞—Ç—á–µ (–≤–∫–ª—é—á–∞—è –±–æ—Ç–æ–≤) */
    playersPerMatch: 3,

    /** –°–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –∂–¥–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º (–ø–æ—Ç–æ–º –¥–æ–±–∞–≤—è—Ç—Å—è –±–æ—Ç—ã) */
    waitForPlayersSeconds: 10,

    /** –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á—ë—Ç –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –∏–≥—Ä—ã (3, 2, 1...) */
    countdownSeconds: 3,
  },

  // ==========================================
  // üèÉ –ú–ï–•–ê–ù–ò–ö–ê –ü–û–õ–Å–¢–ê
  // ==========================================
  flight: {
    /**
     * –ë–∞–∑–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª—ë—Ç–∞ (–ø–∏–∫—Å–µ–ª–µ–π –≤ —Å–µ–∫—É–Ω–¥—É)
     * –ë–æ–ª—å—à–µ = –±—ã—Å—Ç—Ä–µ–µ –ª–µ—Ç–∏—Ç, —Å–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å
     * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 150-300
     */
    baseSpeed: 200,

    /**
     * –°–∏–ª–∞ –ø—Ä—ã–∂–∫–∞ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ = –≤–≤–µ—Ä—Ö)
     * –ü–æ –º–æ–¥—É–ª—é –±–æ–ª—å—à–µ = –≤—ã—à–µ –ø—Ä—ã–≥–∞–µ—Ç
     * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: -400 –¥–æ -800
     */
    jumpForce: -600,

    /**
     * –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è (–ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –≤–Ω–∏–∑)
     * –ë–æ–ª—å—à–µ = –±—ã—Å—Ç—Ä–µ–µ –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ –ø—Ä—ã–∂–∫–∞
     * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 1000-2000
     */
    gravity: 1500,

    /**
     * –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –≤—Å–µ–π –∏–≥—Ä—ã
     */
    speedIncrementPerSecond: 0,
  },

  // ==========================================
  // üöß –ü–†–ï–ü–Ø–¢–°–¢–í–ò–Ø
  // ==========================================
  obstacles: {
    /**
     * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π –Ω–∞ –¥–æ—Ä–æ–∂–∫–µ
     * –ë–æ–ª—å—à–µ = —Å–ª–æ–∂–Ω–µ–µ
     * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 5-30
     * 0 = –±–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
     */
    count: 5,

    /**
     * –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è–º–∏ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)
     * –ß—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É
     * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 100-300
     */
    minSpacing: 150,

    /**
     * –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞ –≤ –Ω–∞—á–∞–ª–µ (–±–µ–∑ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π)
     * –ß—Ç–æ–±—ã –∏–≥—Ä–æ–∫ –º–æ–≥ —Ä–∞–∑–æ–≥–Ω–∞—Ç—å—Å—è
     * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 300-800
     */
    safeZoneStart: 500,
  },

  // ==========================================
  // üó∫Ô∏è –†–ê–ó–ú–ï–†–´ –ò–ì–†–û–í–û–ì–û –ü–û–õ–Ø
  // ==========================================
  field: {
    /** –®–∏—Ä–∏–Ω–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è –≤ –ø–∏–∫—Å–µ–ª—è—Ö */
    width: 1000,

    /** –í—ã—Å–æ—Ç–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è –≤ –ø–∏–∫—Å–µ–ª—è—Ö */
    height: 600,

    /** –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∏–≥—Ä–æ–∫–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
    playerStartY: 300,

    /** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ (–ø–æ—Ç–æ–ª–æ–∫) */
    ceilingY: 50,

    /** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ (–ø–æ–ª) */
    floorY: 550,

    /**
     * –î–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–æ —Ñ–∏–Ω–∏—à–∞ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)
     * –ü—Ä–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ 200 –∏ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ 3000 = ~15 —Å–µ–∫—É–Ω–¥ –∏–≥—Ä—ã
     */
    finishDistance: 3000,
  },

  // ==========================================
  // üìä –í–õ–ò–Ø–ù–ò–ï –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö –°–ü–ò–†–ò–ö–ê
  // ==========================================
  spiritStats: {
    /**
     * –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∫–æ—Ä–æ—Å—Ç–∏ –±–µ–≥–∞ (–æ—Ç 0 –¥–æ 1)
     * 1.0 = –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (speed=100 –¥–∞—ë—Ç +100% –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏)
     * 0.5 = —Å—Ä–µ–¥–Ω—è—è (speed=100 –¥–∞—ë—Ç +50%)
     * 0.1 = –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (speed=100 –¥–∞—ë—Ç +10%)
     */
    speedBonusPerPoint: 1.0,

    /**
     * –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –ø—Ä—ã–∂–∫–∞ (–≤ %)
     * –ë–∞–∑–æ–≤–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ jump=1. –ß–µ–º –≤—ã—à–µ jump, —Ç–µ–º –º–µ–Ω—å—à–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ.
     * 50 = —Å–ø–∏—Ä–∏—Ç —Å jump=1 –±–µ–∂–∏—Ç –Ω–∞ 50% –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤–æ –≤—Ä–µ–º—è –ø—Ä—ã–∂–∫–∞
     * 30 = —Å–ø–∏—Ä–∏—Ç —Å jump=1 –±–µ–∂–∏—Ç –Ω–∞ 30% –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤–æ –≤—Ä–µ–º—è –ø—Ä—ã–∂–∫–∞
     * –ü—Ä–∏ jump=100 –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ = 0% (–ø—Ä—ã–≥–∞–µ—Ç –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏)
     */
    jumpSlowdown: 10,

    /** –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –Ω–µ—Ç —Å–ø–∏—Ä–∏–∫–∞ */
    defaults: {
      speed: 1,
      jump: 1,
    },

    /** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ */
    minValue: 1,

    /** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ */
    maxValue: 100,
  },

  // ==========================================
  // ü§ñ –ù–ê–°–¢–†–û–ô–ö–ò –ë–û–¢–û–í
  // ==========================================
  bots: {
    /**
     * –í–∫–ª—é—á–µ–Ω—ã –ª–∏ –±–æ—Ç—ã?
     * true = –±–æ—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –µ—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∏–≥—Ä–æ–∫–æ–≤
     * false = –∂–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
     */
    enabled: true,

    /**
     * –ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –º—Å –¥–æ–±–∞–≤–ª—è—Ç—å –±–æ—Ç–æ–≤ –µ—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∏–≥—Ä–æ–∫–æ–≤
     * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 3000-10000
     */
    fillTimeoutMs: 3000,

    /** –ò–º–µ–Ω–∞ –±–æ—Ç–æ–≤ (–≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ) */
    names: [
      'SpirikBot_1',
      'SpirikBot_2',
      'SpirikBot_3',
      'SpirikBot_4',
      'SpirikBot_5'
    ],

    // --- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç –±–æ—Ç–æ–≤ ---

    /**
     * –ù–∞ –∫–∞–∫–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –±–æ—Ç "–≤–∏–¥–∏—Ç" –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å
     * –ë–æ–ª—å—à–µ = –±–æ—Ç —Ä–∞–Ω—å—à–µ –≤–∏–¥–∏—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ = —É–º–Ω–µ–µ
     * –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 200-500
     */
    visionDistance: 350,

    /**
     * –°–ª—É—á–∞–π–Ω—ã–π —Ä–∞–∑–±—Ä–æ—Å —Ä–µ–∞–∫—Ü–∏–∏ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)
     * –ë–æ–ª—å—à–µ = –±–æ—Ç –º–µ–Ω–µ–µ —Ç–æ—á–Ω—ã–π, –±–æ–ª–µ–µ "—á–µ–ª–æ–≤–µ—á–Ω—ã–π"
     * 0 = –∏–¥–µ–∞–ª—å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è
     */
    reactionRandomness: 20,

    /**
     * –£—Ä–æ–≤–µ–Ω—å —Å–∫–∏–ª–ª–∞ –±–æ—Ç–æ–≤ (–æ—Ç 0 –¥–æ 1)
     * –í–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä—ã–∂–∫–æ–≤
     * 0.5 = –ø–æ–ø–∞–¥–∞–µ—Ç –≤ 50% —Å–ª—É—á–∞–µ–≤
     * 1.0 = –∏–¥–µ–∞–ª—å–Ω—ã–π –±–æ—Ç
     */
    skillLevel: {
      min: 0.6,  // –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å–∫–∏–ª–ª
      max: 0.9, // –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å–∫–∏–ª–ª
    },

    // --- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –±–æ—Ç–æ–≤ ---

    /** –ë–µ–≥ –±–æ—Ç–∞ (–æ—Ç 1 –¥–æ 100) */
    speed: 50,

    /** –ü—Ä—ã–∂–æ–∫ –±–æ—Ç–∞ (–æ—Ç 1 –¥–æ 100) */
    jump: 30,
  },

  // ==========================================
  // üß™ –†–ï–ñ–ò–ú –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø (–¥–ª—è —Å–µ–±—è)
  // ==========================================
  testing: {
    /**
     * –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?
     * –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å–≤–æ–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
     */
    enabled: true,

    /** –¢–≤–æ–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */
    myStats: {
      speed: 50,
      jump: 10,
    },

    /**
     * –ë–µ—Å—Å–º–µ—Ä—Ç–∏–µ (–Ω–µ —É–º–∏—Ä–∞–µ—à—å –æ—Ç —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π)
     */
    godMode: false,

    /**
     * –£–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏)
     */
    noObstacles: false,

    /**
     * –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
     */
    showDebugInfo: false,
  },
}

// ==========================================
// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞
// (–Ω–µ —Ç—Ä–æ–≥–∞–π —ç—Ç–æ—Ç –∫–æ–¥)
// ==========================================
export function convertToLegacyConfig() {
  const s = gameSettings

  // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç—ã –≤ —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
  const speedStatMultiplier = s.flight.baseSpeed * s.spiritStats.speedBonusPerPoint / 100
  const jumpSlowdownBase = s.spiritStats.jumpSlowdown / 100 // –ë–∞–∑–æ–≤–æ–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ (0.5 = 50%)

  return {
    game: {
      playersPerMatch: s.match.playersPerMatch,
      matchmakingTimeout: s.match.waitForPlayersSeconds * 1000,
      countdownSeconds: s.match.countdownSeconds,
      tickRate: 60,
    },
    flowFlight: {
      baseSpeed: s.flight.baseSpeed,
      baseJumpForce: s.flight.jumpForce,
      baseGravity: s.flight.gravity,
      speedIncrement: s.flight.speedIncrementPerSecond,
      gameWidth: s.field.width,
      gameHeight: s.field.height,
      playerStartY: s.field.playerStartY,
      minY: s.field.ceilingY,
      maxY: s.field.floorY,
      finishDistance: s.field.finishDistance,
      speedStatMultiplier,
      jumpSlowdownBase,
    },
    obstacles: {
      count: s.obstacles.count,
      minSpacing: s.obstacles.minSpacing,
      safeZoneStart: s.obstacles.safeZoneStart,
    },
    stats: {
      defaultSpeed: s.spiritStats.defaults.speed,
      defaultJump: s.spiritStats.defaults.jump,
      min: s.spiritStats.minValue,
      max: s.spiritStats.maxValue,
    },
    bots: {
      enabled: s.bots.enabled,
      fillTimeout: s.bots.fillTimeoutMs,
      reactionDistance: s.bots.visionDistance,
      reactionVariance: s.bots.reactionRandomness,
      names: s.bots.names,
      stats: {
        speed: { min: s.bots.speed, max: s.bots.speed },
        jump: { min: s.bots.jump, max: s.bots.jump },
      },
      skillLevel: s.bots.skillLevel,
    },
    testing: s.testing,
  }
}
